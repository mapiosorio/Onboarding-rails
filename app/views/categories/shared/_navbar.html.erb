 <div class="pt-2 d-flex bg-white pb-lg-4 fixed-top position-lg-static">
  <div class="mx-lg-5 px-lg-5 d-flex justify-content-between row w-100">
    <div class="mx-3 mx-lg-0 m-lg-0 col-lg-8 d-flex align-items-center justify-content-between">
      <div class="mt-5"><%= image_tag('planit_logo.png', alt: 'PlanIt logo') %></div>
      <div class="d-flex flex-column justify-content-center">
        <nav class="navbar navbar-expand-lg d-flex flex-column mt-5 mt-lg-0 p-0">
          <div>
            <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel">
              <div class="offcanvas-header">
                <h5 class="offcanvas-title" id="offcanvasNavbarLabel"><% t('categories') %></h5>
                <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
              </div>
              <div class="offcanvas-body">
                <ul class="navbar-nav flex-grow-1 pe-5 gap-xl-5 gap-2 ms-lg-5 mb-lg-4">
                  <% Category.all.each do |category| %>
                    <li class="nav-item">
                      <%= link_to category.name, category, class: "bg-primary-gradient text-transparent bg-clip-text pb-1 #{' border-primary-gradient' if current_page?(category) || current_page?(filter_order_category_path(category))}" %>
                    </li>
                  <% end %>
                  <div class="d-lg-none mt-3">
                    <h5><%= t('personal') %></h5>
                    <li class="nav-item fw-light pb-1"><%= t('navbar.dropdown.points') %></li>
                    <li class="nav-item fw-light pb-1"><%= link_to t('navbar.dropdown.account'), edit_user_registration_path, class: 'text-dark' %></li>
                   <li class="dropdown-item ps-0 fw-light"><%= t('navbar.dropdown.favourites') %></li>
                    <li class="dropdown-item ps-0 fw-light"><%= t('navbar.dropdown.orders') %></li>
                    <li class="dropdown-item ps-0 fw-light"><%= t('navbar.dropdown.campaigns') %></li>
                    <li class="dropdown-item ps-0 fw-light text-info"><%= t('navbar.dropdown.help') %></li>
                    <li class="dropdown-item ps-0 fw-light text-info"><%= link_to t('navbar.dropdown.log_out'), destroy_user_session_path, class: 'text-info'  %></li>
                  </div>
                </ul>
              </div>
            </div>
          </div>
        </nav>
        <%= form_tag(search_products_path, class: 'position-relative d-none d-lg-flex w-100', data: { turbo: (request.path == (category_path(@category.id) if defined?(@category) )) }) do %>
          <%= hidden_field_tag :category_id, @category.id if defined?(@category) && @category.present? %>
          <%= text_field_tag :search, params[:search], class: 'form-control rounded-4 w-100 text-center mx-3', placeholder: '&#x1F375; Food Box &nbsp; | &nbsp; $1.000 - $2.000'.html_safe %>
          <%= button_tag(type: 'submit', class: 'btn btn-custom-light-blue rounded-5 position-absolute end-0 top-0 px-2 py-1 me-3 mt-1 opacity-75') do %>
            <i class="bi bi-search text-white"></i>
          <% end %>
        <% end %>
      </div>
    </div>
    <%= form_tag(search_products_path, class: 'position-relative d-flex d-lg-none mt-4 pb-4 pb-lg-0 ms-3',  data: { turbo: (request.path == (category_path(@category.id) if defined?(@category) )) }) do %>
      <%= hidden_field_tag :category_id, @category.id if defined?(@category) && @category.present? %>
      <%= text_field_tag(:search, params[:search], class: 'form-control rounded-5 w-100 text-center', placeholder: '&nbsp; &nbsp; &nbsp; Box de regalos'.html_safe, type: 'search') %>
      <%= button_tag(type: 'submit', class: 'btn btn-custom-light-blue rounded-5 position-absolute start-25 ms-1 top-0 px-2 py-1 mt-1 opacity-75') do %>
        <i class="bi bi-search text-white"></i>
      <% end %>
    <% end %>
    <div class="d-none d-lg-flex col justify-content-end align-items-center mt-5">
      <i class="bi bi-bell me-5"></i>
      <% image_url = current_user.photo.attached? ? current_user.photo : 'default_profile_picture.jpeg' %>
      <%= image_tag(image_url, class: 'img-fluid rounded-circle me-3', width: '50px', height: '50px', alt: 'Profile picture') %>
      <div class="d-flex flex-column">
        <%= current_user.name %>
        <%= current_user.surname %>
        <div class="d-flex">
          <p class="text-secondary m-0"><%= current_user.position %></p>
          <div class="dropdown">
            <button class="btn fw-light dropdown-toggle p-0 ms-2 border-0" type="button" data-bs-toggle="dropdown" aria-expanded="false"></button>
            <ul class="dropdown-menu px-3">
              <li class="dropdown-item ps-0 fw-light p-0">
                <div class="d-flex justify-content-between align-self-end">
                  <div class="d-flex flex-column">
                    <p class="m-0 p-0 text-transparent bg-primary-gradient bg-clip-text fw-medium fs-5"><%= t('navbar.dropdown.points_number') %></p>
                    <p class="mb-1 p-0"><%= t('navbar.dropdown.points') %></p>
                  </div>
                  <p class="text-primary p-0 m-0 d-flex align-self-end mb-1"><%= t('navbar.dropdown.see_more') %></p>
                </div>
              </li>
              <div class="border-bottom border-dark"></div>
              <li class="dropdown-item ps-0 fw-light"><%= link_to t('navbar.dropdown.account'), edit_user_registration_path, class: 'text-dark' %></li>
              <div class="border-bottom border-dark"></div>
              <li class="dropdown-item ps-0 fw-light"><%= t('navbar.dropdown.favourites') %></li>
              <div class="border-bottom border-dark"></div>
              <li class="dropdown-item ps-0 fw-light"><%= link_to t('navbar.dropdown.orders'), orders_path, class: 'text-dark' %></li>
              <div class="border-bottom border-dark"></div>
              <li class="dropdown-item ps-0 fw-light"><%= t('navbar.dropdown.campaigns') %></li>
              <div class="border-bottom border-dark"></div>
              <li class="dropdown-item ps-0 fw-light text-info"><%= t('navbar.dropdown.help') %></li>
              <div class="border-bottom border-info"></div>
              <li class="dropdown-item ps-0 fw-light text-info"><%= link_to t('navbar.dropdown.log_out'), destroy_user_session_path, class: 'text-info'  %></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
