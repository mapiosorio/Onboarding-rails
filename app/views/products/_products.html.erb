<%= turbo_frame_tag 'products' do %>
  <div class="d-flex mt-lg-5 mt-0 flex-column flex-lg-row justify-content-center align-items-center">
    <p class="text-center d-flex d-lg-none justify-content-center mt-5 text-secondary"><%= "#{products.count.to_s} #{t('results')}" %></p>
    <% if products.any? %>
      <div class="d-flex w-100 mt-2 pt-5 mt-lg-0 pt-lg-0 row row-cols-2 row-cols-sm-3 row-cols-md-4 row-cols-xl-5">
        <% products.each do |product| %>
          <div class="col">
            <%= link_to product_path(product), data: { turbo: false } do %>
              <div class="bg-white rounded flex-column mb-3 position-relative">
                <%= image_tag product.image, class: 'img-fluid h-100 w-100' if product.image.attached? %>
                <i class="bi bi-heart position-absolute text-white end-0 me-2 mt-1 heart"></i>
                <div class="mx-2 mt-2">
                  <div class="d-flex justify-content-between">
                    <div class="fs-6"><%= product.name %></div>
                    <div class="bg-primary-gradient bg-clip-text text-transparent">
                      <%= product.rating %>
                      <%= image_tag('star.png', alt: 'rating logo') %>
                    </div>
                  </div>
                  <div class="text-secondary"><%= product.provider.name %></div>
                  <p class="mt-2 mb-2 bg-primary-gradient bg-clip-text text-transparent fw-medium">$<%= product.price %></p>
                </div>
              </div>
            <% end %>
          </div>
        <% end %>
      </div>
    <% else %>
      <h3 class="text-center mt-5 pt-5 text-info fw-light mb-5 d-none d-lg-flex"><%= t('no_products') %></h3>
    <% end %>
  </div>
  <div class="d-flex justify-content-center mt-5">
    <%== render partial: 'pagy/pagination', locals: { pagy: pagy } if pagy.pages > 1 %>
  </div>
<% end %>
